<ion-header>
  <ion-toolbar>
    <ion-title>Datos del pedido</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="salir()">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="venta">
  <ion-list>
    <ion-list-header>
      <ion-title color="secondary">Venta N° {{venta.id}}</ion-title>
      <ion-title color="danger">Total: {{venta.total | currency:'COP':'symbol':'1.0-0'}}</ion-title>
    </ion-list-header>

    <ion-item *ngFor="let item of venta.detalle">
      <ion-grid>
        <ion-row>
          <ion-col size="1">
            <ion-label>{{item.cantidad}}</ion-label>
          </ion-col>

          <ion-col size="8">
            <ion-label>{{item.producto.nombre}}</ion-label>
          </ion-col>

          <ion-col size="3" style="text-align: right;">
            <ion-label>{{item.subtotal | currency:'COP':'symbol':'1.0-0'}}</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

    <ion-item *ngIf="venta.domicilio">
      <ion-text>
        <ion-title>
          Domicilio
        </ion-title>
        <br>
        <ion-title size="small">
          {{venta.domicilio.nombre}}
        </ion-title>
        <ion-label>Dirección: {{venta.domicilio.direccion}}</ion-label>
        <ion-label>Teléfono: {{venta.domicilio.telefono}}</ion-label>
      </ion-text>
    </ion-item>

    <ion-item *ngIf="venta.pago">
      <ion-text>
        Pago: {{venta.pago | currency:'COP':'symbol':'1.0-0'}}
      </ion-text>
    </ion-item>

    <ion-item *ngIf="venta.pago">
      <ion-text>
        Devolución: {{venta.devuelta | currency:'COP':'symbol':'1.0-0'}}
      </ion-text>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer *ngIf="venta">
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button color="primary" (click)="actualizar('Preparado')" *ngIf="venta.estado == 'Pendiente'">
        <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
        Preparado
      </ion-button>

      <ion-button color="primary" (click)="actualizar('Enviado')" *ngIf="venta.estado == 'Preparado' && venta.domicilio">
        <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
        Enviado
      </ion-button>

      <ion-button color="primary" (click)="actualizar('Pendiente pago')" *ngIf="venta.estado == 'Preparado' && !venta.domicilio">
        <ion-icon name="checkmark-circle-outline" slot="start"></ion-icon>
        Pendiente pago
      </ion-button>

      <ion-button color="success" (click)="finalizar()"
        *ngIf="venta.estado == 'Enviado' || venta.estado == 'Pendiente pago'">
        <ion-icon name="checkmark-done-circle-outline" slot="start"></ion-icon>
        Finalizado
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>